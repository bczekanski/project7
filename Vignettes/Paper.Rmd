---
title: "Paper"
author: "Ben Czekanski"
date: "April 24, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(knitr)
library(ws.data)
library(dplyr)
library(lubridate)
library(zoo)
library(RcppRoll)
library(ggplot2)
library(reshape)
#Dont want to use reshape long term
library(tidyr)
library(project7)
library(htmlTable)
```

```{r}
x <- get_data()
y <- get_monthly(x)

#x -> x
#z -> z 
#y <- x 


#library(devtools)
#use_data(x, overwrite = TRUE)

```

```{r}
#z -> z
 one <- comp_ret1(y)
 two <- comp_ret2(y)
 three <- comp_ret3(one, two)
z <- three
#z <- compute_ret(y)
#use_data(z, overwrite = TRUE)
w <- do_rank(z, 10, 3, 10) 
#use_data(w, overwrite  = TRUE)
```
    
#Price Momentum and Trading Volume:
###The Momentum Life Cycle Hypothesis

##Abstract:

##Intro
This paper is a replicattion of "Price Momentum and Trading Volume," a 2000 paper by x and y published in the z issue of the Journal of Finance. 
Questions being asked in paper

##Literature Review
Mostly review of original "Price Momentum and Trading Volume"
Review the main articles they reference.

##Data and Methodology
What is the universe/ How was it filtered?
General analysis and manipulation

## Analysis
Intro to chart: What question does it answer, what is the data in it, how did I get it in this form

What we can conclude from this chart, why it matters

Transition to next chart

Repeat 11 more times

##Conclusion of replication
Summarize replication, review similarities and differences with original.

##Intro to extension
Re-explain MLC hypothesis
What am I gonna do
Charts & Tables
What I did, what it means, why it matters
Summarize and conclude extension

## Conclusion
Review replication
Review Extension
Connect
INternal Validity
External Validity
Future Research
Final, brief, thorough wrap up - If only read abstract, tables and this, what's my message?


```{r}
v <- tbl_one(w)

## Table One
htmlTable(round(v, 3),
          header = c("J", "Portfolio&dagger;", "Returns", "Volume", "SzRank", "Price", "3", "6", "9", "12", "24", "36"),
          rnames = FALSE,
          rgroup = c(3, 6, 9, 12),
          n.rgroup = c(4, 4, 4,4),
          cgroup = c("", "Returns per Month"),
          n.cgroup = c(6, 6),
          tfoot = "&dagger; Portfolio 0 represents the difference between Portfolio 10 and Portfolio 1"
          )
```
What we can conclude from this chart, why it matters

Transition to next chart

Intro to chart: What question does it answer, what is the data in it, how did I get it in this form
```{r}
t <- tbl_two(w)
  
  htmlTable(round(t, 3),
          header = c("Returns", "1", "2", "3", "0", "1", "2", "3", "0", "1", "2", "3", "0",  "1", "2", "3", "0"),
          rnames = FALSE,
          rgroup = c(3, 6, 9, 12),
          n.rgroup = c(4, 4, 4,4),
          cgroup = c("", "k = 3", "k = 6", "k = 9", "k = 12"),
          n.cgroup = c(1, 4, 4, 4, 4),
          tfoot = "&dagger; Portfolio 0 represents the difference between Portfolio 10 and Portfolio 1"
          )
```

```{r}
w2 <- do_rank(z, 3, 10, 10)  

ten3 <- tbl_three(w2)

htmlTable(round(ten3, 3),
          header = c("Returns", "1", "5", "10", "0", "1", "5", "10", "0", "1", "5", "10", "0", "1", "5", "10", "0"),
          rnames = FALSE,
          cgroup = c("", "k = 3", "k = 6", "k = 9", "k = 12"),
          n.cgroup = c(1, 4, 4, 4, 4),
          tfoot = "&dagger; Portfolio 0 represents the difference between Portfolio 10 and Portfolio 1"
          )
```

```{r}
w3 <- do_rank(z, 5, 5, 10)

five5 <- tbl_three_b(w3)

htmlTable(round(five5, 3),
          header = c("Returns", "1", "3", "5", "0", "1", "3", "5", "0", "1", "3", "5", "0", "1", "3", "5", "0"),
          rnames = FALSE,
          cgroup = c("", "k = 3", "k = 6", "k = 9", "k = 12"),
          n.cgroup = c(1, 4, 4, 4, 4),
          tfoot = "&dagger; Portfolio 0 represents the difference between Portfolio 10 and Portfolio 1"
          )

```

```{r}
w4 <- z %>%
  mutate(half = ntile(cap.usd, 2)) %>%
  filter(half == 1)
w4 <- do_rank(w4, 5, 5, 10)

five5_top_cap <- tbl_three_b(w4)

htmlTable(round(five5_top_cap, 3),
          header = c("Returns", "1", "3", "5", "0", "1", "3", "5", "0", "1", "3", "5", "0", "1", "3", "5", "0"),
          rnames = FALSE,
          cgroup = c("", "k = 3", "k = 6", "k = 9", "k = 12"),
          n.cgroup = c(1, 4, 4, 4, 4),
          tfoot = "&dagger; Portfolio 0 represents the difference between Portfolio 10 and Portfolio 1"
          )
```


```{r}
# tbl_4 <- tbl_four(w2)

```

```{r}
a <- get_year(x)
b <- compute_ret_years(y) 
b <- b %>%
  mutate(year = year(monthYear))
c <- left_join(a, b, by = c("symbol", "year", "cap.usd")) %>%
  na.omit %>%
  mutate()
d <- do_rank_year(c, 10, 3, 10)

```








